<html>

<head>
<script type="text/javascript" src="lib/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="js/card.js"></script>
<script type="text/javascript" src="js/tichu.js"></script>
<script type="text/javascript" src="js/player.js"></script>
<script type="text/javascript" src="js/table.js"></script>
<script type="text/javascript" src="js/graphics.js"></script>
<script type="text/javascript" src="js/network.js"></script>
<script type="text/javascript" src="js/chat.js"></script>
<script type="text/javascript" src="js/actions.js"></script>
<script type="text/javascript" src="js/CombinaisonsValidator.js"></script>
</head>

<body>

<button onclick="Game.enablePlayMode()">Mode jeu</button>
<input type="button" onclick="GameConnection.loadGame('test')" value="Load partie"/>
<input type="text" size="10" id="idName"/>
<input type="button" onclick="GameConnection.connect('test',$('#idName').val())" value="Connexion"/>

<br/>
<canvas id="canvas" width="600" height="400" style="border:solid 1px black"></canvas>

<div id="actions"></div>

<script>

$('#checkMode').click(function(){setCheckMode();});

function setCheckMode(){
	$('#canvas').get(0).addEventListener('mousedown',changeState,false);
}

var canvas = $('#canvas').get(0).getContext('2d');

function changeState(e){
	var x = e.clientX - $('#canvas').offset().left;
	var y = e.clientY - $('#canvas').offset().top;
	var card = findCardsContains(x,y);
	
	if(card != null){
		if(card.checked){
			card.checked = false;
			card.y+=10;
		}
		else{
			card.checked = true;
			card.y-=10;
		}
	}
}

var EventHelper = {
	getPosition:function(e){
		var x = e.clientX - $('#canvas').offset().left;
		var y = e.clientY - $('#canvas').offset().top + $('body').scrollTop();
		return {x:x,y:y};
	}
}

PlayerManager.init();
CardManager.init();

ComponentManager.run();


</script>


</body>

</html>