<html>

<head>
<script type="text/javascript" src="lib/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="js/card.js"></script>
<script type="text/javascript" src="js/tichu.js"></script>
<script type="text/javascript" src="js/player.js"></script>
<script type="text/javascript" src="js/table.js"></script>
<script type="text/javascript" src="js/graphics.js"></script>
<script type="text/javascript" src="js/network.js"></script>
<script type="text/javascript" src="js/chat.js"></script>
<script type="text/javascript" src="js/actions.js"></script>
<script type="text/javascript" src="js/score.js"></script>
<script type="text/javascript" src="js/CombinaisonsValidator.js"></script>

<style></style>

</head>

<body>

<input type="text" size="10" id="idName"/>
<input type="button" onclick="GameConnection.connect('test',$('#idName').val())" value="Connexion"/>

<br/>

<canvas id="canvas" width="600" height="400" style="border:solid 1px black;float:left"></canvas>
<div id="idScoreDiv" style="float:left;width:200px;color:white;background-color:#111111;height:400px;text-align:center">
    <div style="float:left;width:49%">Eux</div>
    <div style="float:left;width:49%">Nous</div>
    <hr style="clear:both;border:dashed 1px white;margin-bottom:20px"/>
    <div class="scoreLeft" style="float:left;width:49%"></div>
    <div class="scoreRight" style="float:left;width:49%"></div>
    <hr style="clear:both"/>
    <div class="totalScoreLeft" style="float:left;width:49%"></div>
    <div class="totalScoreRight" style="float:left;width:49%"></div>
</div>
<div style="clear:both"></div>
<div id="actions"></div>
<div style="width:600px;height:150px;overflow:auto" id="idChatDiv"></div>
<input type="text" style="width:500px;" id="idMessage"/>

<style>
    .box{
        display:inline-block;
        width:200px;
        border:solid 2px blue;
        margin:20px;
        padding-left:5px;
    }

    .glue {
        display:inline-block;
        width:200px;
    }

</style>

<div id="selectGame">
    <div id="idMessageInfo"></div>
    Game : <input type="text" id="idGameName"/><button id="idLoadGame">OK</button><br/>
    <span class="glue"></span>
    <span style="" class="box joueur_N">N : <span></span></span>     <br/>
    <span style="" class="box joueur_O">O : <span></span></span>
    <span class="glue"></span>
    <span style="" class="box joueur_E">E : <span></span></span><br/>
    <span class="glue"></span>
    <span style="" class="box joueur_S">S : <span></span></span>     <br/>

</div>


<script>

    var div = $('#selectGame');
    $('#idLoadGame').click(function(){
        GameConnection.loadGame($('#idGameName').val(),function(data){
            if(data.message){
                $('#idMessageInfo').html(data.message);
                $('span[class*="joueur_"] > span',div).unbind('click').html('');
            }else{
                $('#idMessageInfo').html("Well loaded");
                data.players.forEach(function(j){
                   $('.joueur_' + j.orientation + ' > span',div).bind('click',function(){
                        alert("Connection de " + j.name);
                   }).html(j.name);
                });
            }
            console.log(data);
        });
    });

PlayerManager.init();
CardManager.init();
Actions.init();
Chat.init();
Scorer.init();
ComponentManager.run();

</script>

</body>

</html>